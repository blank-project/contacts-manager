{{#with contact}}
<ul>
  <li>{{ fullName }}</li>
  <li>{{ email }}</li>
  <li>{{ phone }}</li>
  <li>
  {{#each tags}}
    {{! TODO Find a way to factor tag and tagEdit}}
    {{>tagEdit}}
  {{else}}
    Aucune Ã©tiquette
  {{/each}}
  </li>
</ul>
{{/with}}
<form method="POST" action="/contacts/{{ contact.id }}/tags/">
  <select name="tagId" id="tagId">
    {{#tags}}
    <option value="{{ id }}">{{ name }}</option>
    {{/tags}}
  </select>
  <input type="submit" value="Ajouter" />
</form>
{{#with contact}}
<a href="edit/{{ id }}">Edit</a>
{{/with}}
<a href="/contacts/">Back to List</a>

<script>
var remove = function(id) {
    var oReq = new XMLHttpRequest();

    oReq.addEventListener("load", function() {
      location.reload(true);
    });
    oReq.addEventListener("error", console.log);

    oReq.open("DELETE", "/contacts/{{ contact.id }}/tags/" + id);

    oReq.send();
  }, els = document.getElementsByClassName("tag-remove"), el;

  for (var i = 0; i < els.length; i++) {
    el = els[i];
    var tagId = el.getAttribute("data-id");
    el.addEventListener('click', function(ev) {
      remove(tagId);
    });
  }
</script>
